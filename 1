# Configuration
SMTP_FROM = os.getenv("SMTP_FROM", "facti@ds-d1-ebs-01.ba.ssa.gov")
EMAIL_DRY_RUN = False
SMTP_HOST = os.getenv("SMTP_HOST", "localhost")
SMTP_PORT = int(os.getenv("SMTP_PORT", "25"))
SMTP_USER = os.getenv("SMTP_USER", "")
SMTP_PASSWORD = os.getenv("SMTP_PASSWORD", "")
SMTP_USE_TLS = os.getenv("SMTP_USE_TLS", "false").lower() == "true"
SMTP_USE_SSL = os.getenv("SMTP_USE_SSL", "false").lower() == "true"
SMTP_TIMEOUT = int(os.getenv("SMTP_TIMEOUT", "30"))

# Path to sendmail (common locations)
SENDMAIL_PATH = os.getenv("SENDMAIL_PATH", "/usr/sbin/sendmail")

# For testing/development - log emails instead of sending
#EMAIL_DRY_RUN = os.getenv("EMAIL_DRY_RUN", "true").lower() == "true"

# Log configuration at startup
logger.info(f"[EMAILER CONFIG] SMTP_HOST={SMTP_HOST}, SMTP_PORT={SMTP_PORT}, SMTP_FROM={SMTP_FROM}")
logger.info(f"[EMAILER CONFIG] EMAIL_DRY_RUN={EMAIL_DRY_RUN}, SENDMAIL_PATH={SENDMAIL_PATH}")

export EMAIL_DRY_RUN = False






EMAIL_DRY_RUN = "False"
print(f"!!!!  Email DRY RUN is et to : {EMAIL_DRY_RUN} !!!!")

# Path to sendmail (common locations)
SENDMAIL_PATH = os.getenv("SENDMAIL_PATH", "/usr/sbin/sendmail")


def send_email(
    to: Union[str, List[str]],
    subject: str,
    html_body: str,
    text_body: Optional[str] = None,
--

    EMAIL_DRY_RUN = "False"
    print(f"!!!!  Email DRY RUN is et to : {EMAIL_DRY_RUN} !!!!")
    # All recipients
    all_recipients = to + cc

    # Dry run mode
    if EMAIL_DRY_RUN:
        logger.info(f"[DRY RUN] Email would be sent:")
        logger.info(f"  To: {', '.join(to)}")
        logger.info(f"  Subject: {subject}")
        logger.info(f"  From: {sender}")
        return True

    try:
        # Try sendmail first
        if os.path.exists(SENDMAIL_PATH):
            cmd = [SENDMAIL_PATH, "-t", "-oi"]
            proc = subprocess.Popen(



 grep -n "if.*DRY\|if EMAIL" controller/emailer.py
115:    if EMAIL_DRY_RUN:


